<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COFFEE PROJECT</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous" />
    <!-- animate css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <!-- style css -->
    <link rel="stylesheet" href="style.css">
</head>

<body class="">
    <nav class="navbar">
        <div class="container-fluid">
            <img src="image/logo.webp" alt="" width="50" height="40" class="d-inline-block align-text-top">
            <a class="navbar-brand" href="#">COFFEE PROJECT</a>
            <form class="d-flex">
                <div class="shopping">
                    <img src="image/shopping.svg" width="30px" height="30px">
                </div>
                </button>
            </form>
        </div>
        </div>
    </nav>
    <div class="container">

        <div class="list">

        </div>
    </div>
    <div class="card">
        <div class="closeShopping">
            <img src="image/x.png" width="30px" height="30px">
        </div>
        <h1>Your Cart</h1>
        <ul class="listCard">
            <form>
                <div class="row-centered">
                    <label for="NameC">Name of Customer:</label>
                    <br>
                    <input type="text" id="NameC" name="StudNo" />
                </div>
                <br>
                <div class="row-centered">
                    <label for="Or1">Order 1:</label>
                    <br>
                    <input type="text" id="Or1" name="FirstN" />
                </div>

                <div class="row-centered">
                    <label for="Q1">Quantity:</label>
                    <br>
                    <input type="number" id="Q1" min="1" value="1">
                </div>
                <br>
                <div class="row-centered">
                    <label for="Or2">Order 2:</label></dt>
                    <br>
                    <input type="text" id="Or2" name="LastN" />
                </div>

                <div class="row-centered">
                    <label for="Q2">Quantity:</label></dt>
                    <br>
                    <input type="number" id="Q2" min="1" value="1">
                </div>
                <br>
                <div class="row-centered">
                    <label for="Or3">Order 3:</label>
                    <br>
                    <input type="text" id="Or3" name="address" />
                </div>

                <div class="row-centered">
                    <label for="Q3">Quantity:</label>
                    <br>
                    <input type="number" id="Q3" min="1" value="1">
                </div>
                <br>
                <div class="row-centered">
                    <label for="Or4">Order 4:</label>
                    <br>
                    <input type="text" id="Or4" name="address" />
                </div>

                <div class="row-centered">
                    <label for="Q4">Quantity:</label>
                    <br>
                    <input type="number" id="Q4" min="1" value="1">
                </div>
            </form>
        </ul>


        <div class="checkOut">
            <button type="button" class="btn btn-primary" id="Insbtn">Check Out</button>
            <button type="button" class="btn btn-primary" id="Selbtn">Review Order</button>
            <button type="button" class="btn btn-primary" id="Updbtn">Update Order</button>
            <button type="button" class="btn btn-primary" id="Delbtn">Delete Order</button>
            <button type="button" class="btnone" id="Nextbtn">View Order</button>
        </div>

    </div>

    </div>



    <script src="app.js"> </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous">
        </script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyCHIAKOrB-Exr-uzz6bY2RpaNzhjE1yVVs",
            authDomain: "order-form-6c208.firebaseapp.com",
            databaseURL: "https://order-form-6c208-default-rtdb.firebaseio.com",
            projectId: "order-form-6c208",
            storageBucket: "order-form-6c208.appspot.com",
            messagingSenderId: "97065521201",
            appId: "1:97065521201:web:17e40683c532217c11c510",
            measurementId: "G-XF30LCF9XZ"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        import { getDatabase, ref, set, child, update, remove, get }
            from "https://www.gstatic.com/firebasejs/9.21.0/firebase-database.js"

        const db = getDatabase();
        // references

        var nameC = document.getElementById("NameC");
        var or1 = document.getElementById("Or1");
        var q1 = document.getElementById('Q1');
        var or2 = document.getElementById("Or2");
        var q2 = document.getElementById('Q2');
        var or3 = document.getElementById("Or3");
        var q3 = document.getElementById('Q3');
        var or4 = document.getElementById("Or4");
        var q4 = document.getElementById('Q4');

        var insbtn = document.getElementById("Insbtn");
        var selbtn = document.getElementById("Selbtn");
        var updbtn = document.getElementById("Updbtn");
        var delbtn = document.getElementById("Delbtn");
        var Nextbtn = document.getElementById("Nextbtn");
    Nextbtn.addEventListener("click", function() {
      window.location.href = 'view.html';
    });

        // add data function

        function InsertData() {
            set(ref(db, "Customer/" + nameC.value), {
                NameC: nameC.value,
                Or1: or1.value,
                Q1: q1.value,
                Or2: or2.value,
                Q2: q2.value,
                Or3: or3.value,
                Q3: q3.value,
                Or4: or4.value,
                Q4: q4.value,
            })
                .then(() => {
                    alert("We have received your order!");
                })
                .catch((error) => {
                    alert("UNSUCCESSFUL, ERROR" + error);
                });
        }
        //Select data function//

        function SelectData() {
            const dbref = ref(db);

            get(child(dbref, "Customer/" + NameC.value)).then((snapshot) => {
                if (snapshot.exists()) {
                    nameC.value = snapshot.val().NameC;
                    or1.value = snapshot.val().Or1;
                    q1.value = snapshot.val().Q1;
                    or2.value = snapshot.val().Or2;
                    q2.value = snapshot.val().Q2;
                    or3.value = snapshot.val().Or3;
                    q3.value = snapshot.val().Q3;
                    or4.value = snapshot.val().Or4;
                    q4.value = snapshot.val().Q4;
                } else {
                    alert("No order found!");
                }
            })
                .catch((error) => {
                    alert("UNSUCCESSFUL, ERROR" + error);
                });
        }

        // update date function ??

        function UpdateData() {
            update(ref(db, "Customer/" + nameC.value), {
                NameC: nameC.value,
                Or1: or1.value,
                Q1: q1.value,
                Or2: or2.value,
                Q2: q2.value,
                Or3: or3.value,
                Q3: q3.value,
                Or4: or4.value,
                Q4: q4.value,
            })
                .then(() => {
                    alert("Order updated successfully!");
                })
                .catch((error) => {
                    alert("UNSUCCESSFUL, ERROR" + error);
                });
        }

        // Delete Function

        function DeleteData() {
            remove(ref(db, "Customer/" + NameC.value))
                .then(() => {
                    alert("Order removed successfully!");
                })
                .catch((error) => {
                    alert("UNSUCCESSFUL, ERROR" + error);
                });
        }
        //Assign events to buttons

        Insbtn.addEventListener("click", InsertData);
        Selbtn.addEventListener("click", SelectData);
        Updbtn.addEventListener("click", UpdateData);
        Delbtn.addEventListener("click", DeleteData);
    </script>

</body>

</html>